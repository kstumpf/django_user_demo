function getCookie(e){var t=null;if(document.cookie&&document.cookie!=""){var n=document.cookie.split(";");for(var r=0;r<n.length;r++){var i=jQuery.trim(n[r]);if(i.substring(0,e.length+1)==e+"="){t=decodeURIComponent(i.substring(e.length+1));break}}}return t}function ajaxPost(e,t,n,r){r=$.extend({},r,{url:e,method:"post",data:t,onSuccess:function(e){$.isFunction(n)&&n(e.content)}});ajax(r)}function ajaxGet(e,t,n){n=$.extend({},n,{url:e,method:"get",onSuccess:function(e){$.isFunction(t)&&t(e.content)}});ajax(n)}var csrftoken=getCookie("csrftoken");$.ajaxSetup({crossDomain:false});var ajax=function(e,t){function u(e){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(e)}function a(e){var t=document.location.host;var n=document.location.protocol;var r="//"+t;var i=n+r;return e==i||e.slice(0,i.length+1)==i+"/"||e==r||e.slice(0,r.length+1)==r+"/"||!/^(\/\/|http:|https:).*/.test(e)}function f(e){if(e.fragments){for(var t in e.fragments){$(t).replaceWith(e.fragments[t])}}if(e["inner-fragments"]){for(var n in e["inner-fragments"]){$(n).html(e["inner-fragments"][n])}}if(e["append-fragments"]){for(var r in e["append-fragments"]){$(r).append(e["append-fragments"][r])}}if(e["prepend-fragments"]){for(var i in e["prepend-fragments"]){$(i).prepend(e["prepend-fragments"][i])}}}if(typeof e==="object"){t=e;e=t.url}if(!$.isPlainObject(t))t={};t=$.extend({},ajax.DEFAULTS,t);var n=$.isFunction(t.onSuccess)?t.onSuccess:null,r=$.isFunction(t.onRedirect)?t.onRedirect:null,i=$.isFunction(t.onError)?t.onError:null,s=$.isFunction(t.onComplete)?t.onComplete:null,o=$.isFunction(t.onBeforeSend)?t.onBeforeSend:null;$.ajax({url:e,type:t.method||"get",data:t.data,beforeSend:function(e,t){if(!u(t.type)&&a(t.url)){e.setRequestHeader("X-CSRFToken",csrftoken)}o&&o(e,t)},success:function(s){switch(s.status){case 200:t["process-fragments"]&&f(s.content);n&&n(s);break;case 301:case 302:if(r)r(s.content);else window.location.href=s.content;break;default:if(i)i(s);else alert(t.method.toUpperCase()+" "+e+"   "+s.status+" "+s.statusText+"\n"+s.content);break}},error:function(n){if(i)i(n);else alert(t.method.toUpperCase()+" "+e+"   "+n.status+" "+n.statusText+"\n"+n.content)},complete:function(e){s&&s(e)}})};ajax.DEFAULTS={"process-fragments":true,onSuccess:null,onError:null,onBeforeSend:null,onComplete:null,onRedirect:null}